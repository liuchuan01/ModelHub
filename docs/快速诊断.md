# 🔍 登录问题快速诊断

## 问题症状
后端返回正确JWT，但前端没有跳转到主页

## 解决步骤

### 1. 启动数据库
```bash
# macOS
brew services start postgresql@14

# 检查状态
brew services list | grep postgresql
```

### 2. 添加用户账户
```bash
make db-add-users
```

### 3. 启动服务
```bash
# 后端
make dev

# 前端（新终端）
cd frontend && npm run dev
```

### 4. 调试登录
1. 访问 http://localhost:5173
2. 打开控制台（F12）
3. 使用账户：admin / admin123
4. 观察控制台日志

### 5. 预期的控制台输出
```
Login form submitted: {username: "admin", password: "admin123"}
Login successful: {token: "...", user: {...}, expires_in: 86400}
Login result: {token: "...", user: {...}, expires_in: 86400}
Navigating to home page...
App render: {isAuthenticated: true, isLoading: false, user: {...}}
```

### 6. 检查localStorage
控制台运行：
```javascript
localStorage.getItem('auth_token')
localStorage.getItem('user_info')
```

### 7. 常见问题

**问题1：数据库连接失败**
```
psql: error: connection to server on socket
```
解决：启动PostgreSQL服务

**问题2：用户不存在**
```
{"error": "用户名或密码错误"}
```
解决：运行 `make db-add-users`

**问题3：前端不跳转**
- 检查控制台错误
- 清除浏览器缓存
- 重启前端服务器

## 🎯 最终验证

登录成功后应该：
1. 跳转到主页，显示统计卡片
2. 左侧显示导航菜单
3. localStorage包含token和用户信息
4. 控制台显示认证状态为true

## 📞 技术支持

如果问题持续存在，请提供：
1. 控制台完整错误日志
2. 网络请求详情（Network标签）
3. localStorage内容
4. 后端服务器日志 