# 前端调试指南

## 🔍 登录问题诊断

### 步骤1：开启浏览器控制台
1. 打开 http://localhost:5173
2. 按F12或右键选择"检查"
3. 切换到"Console"选项卡

### 步骤2：查看登录日志
登录时应该看到以下日志：
```
Login form submitted: {username: "admin", password: "admin123"}
Login successful: {token: "...", user: {...}, expires_in: 86400}
Login result: {token: "...", user: {...}, expires_in: 86400}
Navigating to home page...
App render: {isAuthenticated: true, isLoading: false, user: {...}}
```

### 步骤3：检查localStorage
在Console中运行：
```javascript
// 检查token是否保存
localStorage.getItem('auth_token')

// 检查用户信息是否保存
localStorage.getItem('user_info')

// 清除认证信息（如需重置）
localStorage.clear()
```

### 步骤4：手动测试认证状态
在Console中运行：
```javascript
// 检查认证服务
import('./src/services/authService.js').then(auth => {
  console.log('Is authenticated:', auth.authService.isAuthenticated())
  console.log('Stored user:', auth.authService.getStoredUser())
  console.log('Token:', auth.authService.getToken())
})
```

## 🛠 常见问题解决

### 问题1：登录成功但页面不跳转
**现象**：后端返回正确JWT，但前端停留在登录页
**解决**：查看Console是否有错误，检查认证状态是否正确更新

### 问题2：页面刷新后需要重新登录  
**现象**：登录后刷新页面又回到登录页
**解决**：检查localStorage中的token是否存在

### 问题3：API请求401错误
**现象**：登录后API请求被拒绝
**解决**：检查Authorization header是否正确添加

## 🎯 快速测试

### 测试账户
- admin / admin123
- user1 / password1
- user2 / password2

### 测试步骤
1. 清除浏览器缓存和localStorage
2. 访问 http://localhost:5173
3. 使用测试账户登录
4. 观察Console日志
5. 检查是否跳转到主页

## 📊 调试数据

### 正确的后端响应格式
```json
{
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
        "id": 1,
        "username": "admin",
        "created_at": "2025-06-26T13:42:35.323754Z",
        "updated_at": "2025-06-26T13:46:00.449945Z"
    },
    "expires_in": 86400
}
```

### localStorage应该包含
```
auth_token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
user_info: '{"id":1,"username":"admin",...}'
``` 